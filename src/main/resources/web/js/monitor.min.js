function setData(a,b,c){var d=a.indexOf(".");$("#tl").text(a.substring(0,d)),$("#ts").text(a.substring(d,5)+" Â°C");var e=b.indexOf(".");$("#hl").text(b.substring(0,e)),$("#hs").text(b.substring(e,5)+" %");var f=c.indexOf(".");$("#pl").text(c.substring(0,f)),$("#ps").text(c.substring(f,7)+" hPa")}function selectFormat(a){switch(a){case"record":return labelFormatRecord;case"hour":return labelFormatHour;case"day":return labelFormatDay;case"month":return labelFormatMonth;case"year":return labelFormatYear}}setData(temp,hum,pres);var apiReq=new XMLHttpRequest;apiReq.onreadystatechange=function(){if(4===this.readyState&&200===this.status&&this.response){for(var a=selectFormat(apiType),b={type:this.response.type,data:{labels:[],datasets:this.response.data.datasets},options:this.response.options},c=0;c<this.response.data.label1.length;c++)b.data.labels.push(a.replace("{{STR1}}",this.response.data.label1[c]).replace("{{STR2}}",this.response.data.label2[c]));new Chart($("#graph"),b)}},apiReq.open("GET","api.json?type="+apiType,!0),apiReq.responseType="json",apiReq.send(null);var con=new WebSocket("ws://"+location.hostname+":{{SOCKET_PORT}}/");con.onmessage=function(a){var b=a.data.split(",");setData(b[0],b[1],b[2])};