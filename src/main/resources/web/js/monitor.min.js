function setData(a,t,e){var s=a.indexOf(".");$("#tl").text(a.substring(0,s)),$("#ts").text(a.substring(s,5)+" °C");var r=t.indexOf(".");$("#hl").text(t.substring(0,r)),$("#hs").text(t.substring(r,5)+" %");var i=e.indexOf(".");$("#pl").text(e.substring(0,i)),$("#ps").text(e.substring(i,7)+" hPa")}function drawGraph(a){getJSON("?type="+a,function(t){var e=$.extend(!0,{},template),s=t.format;e.data.datasets[0].data=t.data[0],e.data.datasets[1].data=t.data[1],e.data.datasets[2].data=t.data[2];for(var r=0;r<t.label1.length;r++){var i=t.label1[r],n=t.label2[r];"record"===a&&0===n&&(n="00"),e.data.labels.push(s.replace("{{STR1}}",String(i)).replace("{{STR2}}",String(n)))}new Chart($("#graph-"+a),e)})}function getJSON(a,t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&200===this.status&&this.response&&t(this.response)},e.open("GET","api.json"+a,!0),e.responseType="json",e.send(null)}getJSON("",function(a){setData(a.temp,a.hum,a.pres);var t,e,s=a.port;"monitor.siketyan.me"===location.hostname?(t="wss://",e="/socket"):(t="ws://",e=":"+s+"/");var r=new WebSocket(t+location.hostname+e);r.onmessage=function(a){var t=a.data.split(",");setData(t[0],t[1],t[2])}}),drawGraph("record"),drawGraph("hour"),drawGraph("day"),drawGraph("month"),drawGraph("year");var template={type:"line",data:{labels:[],datasets:[{borderColor:"rgb(255, 99, 132)",borderWidth:1,fill:!1,yAxisID:"axis-temp"},{borderColor:"rgb(54, 162, 235)",borderWidth:1,fill:!1,yAxisID:"axis-hum"},{borderColor:"rgb(255, 205, 86)",borderWidth:1,fill:!1,yAxisID:"axis-pres"}]},options:{legend:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Temperature (°C)"},type:"linear",display:!0,position:"left",id:"axis-temp"},{scaleLabel:{display:!0,labelString:"Humidity (%)"},type:"linear",display:!0,position:"right",id:"axis-hum"},{scaleLabel:{display:!0,labelString:"Pressure (hPa)"},type:"linear",display:!0,position:"right",id:"axis-pres"}]}}};