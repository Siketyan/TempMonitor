function setData(a,b,c){var d=a.indexOf(".");$("#tl").text(a.substring(0,d)),$("#ts").text(a.substring(d,5)+" Â°C");var e=b.indexOf(".");$("#hl").text(b.substring(0,e)),$("#hs").text(b.substring(e,5)+" %");var f=c.indexOf(".");$("#pl").text(c.substring(0,f)),$("#ps").text(c.substring(f,7)+" hPa")}function selectFormat(a){switch(a){case"record":return labelFormatRecord;case"hour":return labelFormatHour;case"day":return labelFormatDay;case"month":return labelFormatMonth;case"year":return labelFormatYear}}function drawGraph(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===this.readyState&&200===this.status&&this.response){for(var b=selectFormat(a),c={type:this.response.type,data:{labels:[],datasets:this.response.data.datasets},options:this.response.options},d=0;d<this.response.data.label1.length;d++)c.data.labels.push(b.replace("{{STR1}}",this.response.data.label1[d]).replace("{{STR2}}",this.response.data.label2[d]));new Chart($("#graph-"+a),c)}},b.open("GET","api.json?type="+a,!0),b.responseType="json",b.send(null)}setData(temp,hum,pres),drawGraph("record"),drawGraph("hour"),drawGraph("day"),drawGraph("month"),drawGraph("year");var protocol,addr;"monitor.siketyan.me"===location.hostname?(protocol="wss://",addr="/socket"):(protocol="ws://",addr=":{{SOCKET_PORT}}/");var con=new WebSocket(protocol+location.hostname+addr);con.onmessage=function(a){var b=a.data.split(",");setData(b[0],b[1],b[2])};